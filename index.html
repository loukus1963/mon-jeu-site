<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Mon jeu plateforme</title>

<style>
    body {
        margin: 0;
        background: black;
    }

    canvas {
        display: block;
        background: #222;
        margin: 0 auto;
    }
</style>

</head>
<body>

<canvas id="jeu" width="800" height="400"></canvas>

<script>
    const canvas = document.getElementById("jeu");
    const ctx = canvas.getContext("2d");

    // Joueur
    let joueur = {
        x: 50,
        y: 300,
        largeur: 40,
        hauteur: 40,
        vitesseY: 0,
        saute: false
    };

    // Gravité
    const gravite = 1;

    // Contrôles
    let touches = {};

    document.addEventListener("keydown", e => touches[e.key] = true);
    document.addEventListener("keyup", e => touches[e.key] = false);

    function jeuBoucle() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Déplacement gauche/droite
        if (touches["ArrowLeft"]) joueur.x -= 5;
        if (touches["ArrowRight"]) joueur.x += 5;

        // Saut
        if (touches[" "] && !joueur.saute) {
            joueur.vitesseY = -15;
            joueur.saute = true;
        }

        // Gravité
        joueur.y += joueur.vitesseY;
        joueur.vitesseY += gravite;

        // Sol
        if (joueur.y > 300) {
            joueur.y = 300;
            joueur.vitesseY = 0;
            joueur.saute = false;
        }

        // Dessine le joueur
        ctx.fillStyle = "purple";
        ctx.fillRect(joueur.x, joueur.y, joueur.largeur, joueur.hauteur);

        requestAnimationFrame(jeuBoucle);
    }

    jeuBoucle();
</script>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = 800;
canvas.height = 450;

// Joueur
let player = {
    x: 50,
    y: 350,
    width: 30,
    height: 30,
    color: "purple",
    velY: 0,
    jump: false
};

// Gravité
const gravity = 1;

// Sol
const groundHeight = 80;

function gameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Sol gris
    ctx.fillStyle = "gray";
    ctx.fillRect(0, canvas.height - groundHeight, canvas.width, groundHeight);

    // Player
    player.velY += gravity;
    player.y += player.velY;

    // Collision sol
    if (player.y + player.height >= canvas.height - groundHeight) {
        player.y = canvas.height - groundHeight - player.height;
        player.jump = false;
    }

    ctx.fillStyle = player.color;
    ctx.fillRect(player.x, player.y, player.width, player.height);

    requestAnimationFrame(gameLoop);
}

// Saut
window.addEventListener("keydown", (e) => {
    if (e.code === "Space" && !player.jump) {
        player.velY = -20;
        player.jump = true;
    }
});

gameLoop();
</script>
</body>
</html>
